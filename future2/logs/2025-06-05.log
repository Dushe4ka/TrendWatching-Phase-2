2025-06-05 18:43:49,313 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-05 18:43:49,314 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-05 18:43:49,315 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-05 18:43:49,315 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-05 18:43:49,315 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-05 18:43:49,316 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:43:49,917 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:44:02,658 - vector_store - ERROR - Ошибка при создании коллекции: timed out
2025-06-05 18:44:02,659 - test_analysis - ERROR - Ошибка при анализе тренда: timed out
2025-06-05 18:44:40,995 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-05 18:44:40,996 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-05 18:44:40,996 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-05 18:44:40,996 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-05 18:44:40,997 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-05 18:44:40,997 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:44:41,585 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:44:53,620 - vector_store - ERROR - Ошибка при создании коллекции: timed out
2025-06-05 18:44:53,620 - test_analysis - ERROR - Ошибка при анализе тренда: timed out
2025-06-05 18:45:57,032 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-05 18:45:57,033 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-05 18:45:57,034 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-05 18:45:57,034 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-05 18:45:57,034 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-05 18:45:57,034 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:45:57,634 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:46:10,933 - vector_store - ERROR - Ошибка при создании коллекции: timed out
2025-06-05 18:46:10,933 - test_analysis - ERROR - Ошибка при анализе тренда: timed out
2025-06-05 18:54:15,332 - test_analysis - ERROR - Ошибка при тестировании эмбеддингов: Ошибка при тестовой векторизации OpenAI: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}
2025-06-05 18:54:15,332 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:54:16,057 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:54:17,731 - test_analysis - ERROR - Ошибка при анализе тренда: Ошибка при тестовой векторизации OpenAI: Error code: 403 - {'error': {'code': 'unsupported_country_region_territory', 'message': 'Country, region, or territory not supported', 'param': None, 'type': 'request_forbidden'}}
2025-06-05 18:55:02,482 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-05 18:55:02,485 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-05 18:55:02,485 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-05 18:55:02,485 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-05 18:55:02,486 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-05 18:55:02,486 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:55:03,204 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:55:05,451 - vector_store - INFO - Коллекция trends уже существует
2025-06-05 18:55:07,317 - test_analysis - INFO - Получаем материалы за 2025-05-10 для категории: Видеоигры
2025-06-05 18:55:07,345 - vector_store - INFO - Найдено 10 материалов для категории Видеоигры за 2025-05-10
2025-06-05 18:55:07,345 - test_analysis - INFO - Найдено 10 материалов за 2025-05-10
2025-06-05 18:55:07,349 - test_analysis - INFO - Общее количество токенов: 2603
2025-06-05 18:55:07,349 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-05 18:55:07,350 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-05 18:59:08,292 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-05 18:59:08,293 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-05 18:59:08,293 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-05 18:59:08,293 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-05 18:59:08,294 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-05 18:59:08,294 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:59:08,935 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 18:59:11,331 - vector_store - INFO - Коллекция trends уже существует
2025-06-05 18:59:12,799 - test_analysis - INFO - Получаем материалы за 2025-05-10 для категории: Видеоигры
2025-06-05 18:59:12,825 - vector_store - INFO - Найдено 90 материалов для категории Видеоигры за 2025-05-10
2025-06-05 18:59:12,825 - test_analysis - INFO - Найдено 90 материалов за 2025-05-10
2025-06-05 18:59:12,842 - test_analysis - INFO - Общее количество токенов: 23812
2025-06-05 18:59:12,843 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-05 18:59:12,843 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-05 19:01:55,818 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-05 19:01:55,819 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-05 19:01:55,819 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-05 19:01:55,819 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-05 19:01:55,819 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-05 19:01:55,820 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:01:56,502 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:01:58,708 - vector_store - INFO - Коллекция trends уже существует
2025-06-05 19:02:00,451 - test_analysis - INFO - Получаем материалы за 2025-06-02 для категории: Видеоигры
2025-06-05 19:02:00,483 - vector_store - INFO - Найдено 193 материалов для категории Видеоигры за 2025-06-02
2025-06-05 19:02:00,483 - test_analysis - INFO - Найдено 193 материалов за 2025-06-02
2025-06-05 19:02:00,582 - test_analysis - INFO - Общее количество токенов: 140293
2025-06-05 19:02:00,583 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-05 19:02:00,583 - test_analysis - INFO - Количество токенов превышает контекстное окно, разбиваем на чанки
2025-06-05 19:02:00,671 - test_analysis - INFO - Оптимальный размер чанка: 70 материалов
2025-06-05 19:02:00,783 - test_analysis - INFO - Материалы разбиты на 5 чанков
2025-06-05 19:02:00,784 - test_analysis - INFO - Анализ чанка 1/5
2025-06-05 19:02:32,695 - test_analysis - INFO - Анализ чанка 2/5
2025-06-05 19:02:34,175 - llm_client - ERROR - Ошибка при анализе текста: Error code: 400 - {'error': {'message': "This model's maximum context length is 65536 tokens. However, you requested 88719 tokens (88719 in the messages, 0 in the completion). Please reduce the length of the messages or completion.", 'type': 'invalid_request_error', 'param': None, 'code': 'invalid_request_error'}}
2025-06-05 19:02:34,175 - test_analysis - INFO - Анализ чанка 3/5
2025-06-05 19:03:30,327 - test_analysis - INFO - Анализ чанка 4/5
2025-06-05 19:04:18,724 - test_analysis - INFO - Анализ чанка 5/5
2025-06-05 19:09:06,217 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-05 19:09:06,218 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-05 19:09:06,218 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-05 19:09:06,218 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-05 19:09:06,219 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-05 19:09:06,219 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:09:06,881 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:09:09,187 - vector_store - INFO - Коллекция trends уже существует
2025-06-05 19:09:10,632 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-05 19:09:10,678 - vector_store - INFO - Найдено 151 материалов для категории Видеоигры за 2025-06-03
2025-06-05 19:09:10,678 - test_analysis - INFO - Найдено 151 материалов за 2025-06-03
2025-06-05 19:09:10,712 - test_analysis - INFO - Общее количество токенов: 44977
2025-06-05 19:09:10,712 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-05 19:09:10,713 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-05 19:42:05,725 - vector_store - INFO - Коллекция trends уже существует
2025-06-05 19:42:13,296 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:42:13,905 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:42:15,330 - main - INFO - Starting bot...
2025-06-05 19:42:43,631 - vector_store - INFO - Найдено 1 уникальных категорий
2025-06-05 19:42:45,638 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:42:46,246 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:42:48,764 - vector_store - INFO - Коллекция trends уже существует
2025-06-05 19:42:50,293 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-05 19:42:50,311 - vector_store - INFO - Найдено 151 материалов для категории Видеоигры за 2025-06-03
2025-06-05 19:42:50,312 - test_analysis - INFO - Найдено 151 материалов за 2025-06-03
2025-06-05 19:42:50,340 - test_analysis - INFO - Общее количество токенов: 44977
2025-06-05 19:42:50,341 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-05 19:42:50,341 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-05 19:46:08,828 - vector_store - INFO - Найдено 1 уникальных категорий
2025-06-05 19:46:16,286 - vector_store - INFO - Найдено 1 уникальных категорий
2025-06-05 19:48:17,022 - vector_store - INFO - Найдено 1 уникальных категорий
2025-06-05 19:48:27,650 - vector_store - INFO - Найдено 1 уникальных категорий
2025-06-05 19:49:04,962 - vector_store - INFO - Найдено 1 уникальных категорий
2025-06-05 19:49:33,998 - bot - ERROR - Ошибка при анализе: analyze_trend() got an unexpected keyword argument 'user_query'
2025-06-05 19:50:08,461 - vector_store - INFO - Найдено 1 уникальных категорий
2025-06-05 19:50:13,701 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:50:14,312 - llm_client - INFO - DeepseekClient инициализирован
2025-06-05 19:50:17,143 - vector_store - INFO - Коллекция trends уже существует
2025-06-05 19:50:18,912 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-05 19:50:18,955 - vector_store - INFO - Найдено 151 материалов для категории Видеоигры за 2025-06-03
2025-06-05 19:50:18,956 - test_analysis - INFO - Найдено 151 материалов за 2025-06-03
2025-06-05 19:50:18,981 - test_analysis - INFO - Общее количество токенов: 44977
2025-06-05 19:50:18,982 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-05 19:50:18,983 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
