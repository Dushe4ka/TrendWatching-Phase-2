2025-06-04 07:44:41,828 - test_analysis - INFO - Тестовая размерность эмбеддинга: 3072
2025-06-04 07:44:41,829 - test_analysis - INFO - Первые 5 значений: [ 0.00129874 -0.01882819  0.06673978 -0.01900403  0.01014351]
2025-06-04 07:44:41,830 - test_analysis - INFO - Размерность эмбеддингов: 3072
2025-06-04 07:44:41,830 - test_analysis - WARNING - Размерность эмбеддингов (3072) отличается от ожидаемой (1024)
2025-06-04 07:44:41,830 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 07:44:41,831 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 07:44:42,857 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 07:44:49,272 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 07:45:00,264 - test_analysis - INFO - Выделенная тематика: Ключевые факторы успеха и провала в CS GO, прогноз долгосрочной вовлеченности игроков и стратегии развития игры.
2025-06-04 07:45:00,264 - test_analysis - INFO - Текст для векторизации: Ключевые факторы успеха и провала в CS GO, прогноз долгосрочной вовлеченности игроков и стратегии развития игры.
2025-06-04 07:45:02,708 - test_analysis - INFO - Размерность созданного эмбеддинга: 3072
2025-06-04 07:45:02,708 - test_analysis - INFO - Первые 5 значений эмбеддинга: [ 0.00042884  0.01020533 -0.00387919 -0.00589384  0.01075441]
2025-06-04 07:45:02,709 - test_analysis - INFO - Начинаем поиск материалов для категории: Видеоигры
2025-06-04 07:45:02,709 - test_analysis - INFO - Порог релевантности: 0.70
2025-06-04 07:45:02,716 - vector_store - ERROR - Ошибка при поиске векторов: Unexpected Response: 400 (Bad Request)
Raw response content:
b'{"status":{"error":"Wrong input: Vector dimension error: expected dim: 1536, got 3072"},"time":0.001086941}'
2025-06-04 07:45:02,716 - test_analysis - WARNING - Не найдено релевантных материалов
2025-06-04 08:06:02,951 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 08:06:02,952 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 08:06:02,952 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 08:06:02,952 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 08:06:02,953 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 08:06:02,953 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 08:06:03,547 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 08:06:05,545 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 08:06:07,149 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-04 08:06:07,150 - test_analysis - ERROR - Ошибка при получении материалов: 'VectorStore' object has no attribute 'get_materials_by_date'
2025-06-04 08:06:07,150 - test_analysis - ERROR - Ошибка при анализе тренда: 'VectorStore' object has no attribute 'get_materials_by_date'
2025-06-04 09:50:06,704 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 09:50:06,705 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 09:50:06,705 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 09:50:06,706 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 09:50:06,706 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 09:50:06,706 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 09:50:07,312 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 09:50:10,125 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 09:50:11,586 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-04 09:50:11,650 - test_analysis - WARNING - Не найдено материалов за 2025-06-03
2025-06-04 09:51:03,837 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 09:51:03,838 - test_analysis - INFO - Первые 5 значений: [ 0.0298876   0.01854221  0.02011837 -0.00557605 -0.01341968]
2025-06-04 09:51:03,838 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 09:51:03,839 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 09:51:03,839 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 09:51:03,840 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 09:51:04,441 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 09:51:06,718 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 09:51:08,468 - test_analysis - INFO - Получаем материалы за 2025-06-02 для категории: Видеоигры
2025-06-04 09:51:08,505 - test_analysis - WARNING - Не найдено материалов за 2025-06-02
2025-06-04 09:55:51,821 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 09:55:51,822 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 09:55:51,822 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 09:55:51,822 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 09:55:51,822 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 09:55:51,823 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 09:55:52,419 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 09:55:54,705 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 09:55:56,409 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-04 09:55:56,442 - test_analysis - WARNING - Не найдено материалов за 2025-06-03
2025-06-04 09:56:14,740 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 09:56:14,741 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 09:56:14,741 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 09:56:14,741 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 09:56:14,741 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 09:56:14,742 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 09:56:15,330 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 09:56:17,407 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 09:56:18,911 - test_analysis - INFO - Получаем материалы за 2025-06-02 для категории: Видеоигры
2025-06-04 09:56:18,968 - test_analysis - WARNING - Не найдено материалов за 2025-06-02
2025-06-04 10:00:36,431 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:00:36,431 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 10:00:36,432 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:00:36,432 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:00:36,432 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:00:36,433 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:00:37,020 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:00:39,104 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:00:40,477 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-04 10:00:40,481 - vector_store - ERROR - Ошибка при поиске по категории и дате: 2 validation errors for Range
gte
  Input should be a valid number, unable to parse string as a number [type=float_parsing, input_value='2025-06-03', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/float_parsing
lte
  Input should be a valid number, unable to parse string as a number [type=float_parsing, input_value='2025-06-03', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/float_parsing
2025-06-04 10:00:40,483 - test_analysis - WARNING - Не найдено материалов за 2025-06-03
2025-06-04 10:05:03,847 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:05:03,847 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 10:05:03,848 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:05:03,848 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:05:03,848 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:05:03,849 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:05:04,457 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:05:06,506 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:05:07,928 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-04 10:05:07,931 - vector_store - ERROR - Ошибка при поиске по категории и дате: Unknown arguments: ['filter']
2025-06-04 10:05:07,931 - test_analysis - WARNING - Не найдено материалов за 2025-06-03
2025-06-04 10:05:23,282 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:05:23,283 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 10:05:23,283 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:05:23,284 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:05:23,284 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:05:23,284 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:05:23,883 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:05:25,911 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:05:27,313 - test_analysis - INFO - Получаем материалы за 2025-06-02 для категории: Видеоигры
2025-06-04 10:05:27,315 - vector_store - ERROR - Ошибка при поиске по категории и дате: Unknown arguments: ['filter']
2025-06-04 10:05:27,315 - test_analysis - WARNING - Не найдено материалов за 2025-06-02
2025-06-04 10:07:33,846 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:07:33,847 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 10:07:33,847 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:07:33,847 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:07:33,848 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:07:33,848 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:07:34,452 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:07:36,518 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:07:37,939 - test_analysis - INFO - Получаем материалы за 2025-06-02 для категории: Видеоигры
2025-06-04 10:07:37,958 - vector_store - INFO - Найдено 10 материалов для категории Видеоигры за 2025-06-02
2025-06-04 10:07:37,958 - test_analysis - INFO - Найдено 10 материалов за 2025-06-02
2025-06-04 10:07:37,961 - test_analysis - INFO - Общее количество токенов: 3430
2025-06-04 10:07:37,961 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-04 10:07:37,962 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-04 10:07:37,962 - test_analysis - ERROR - Ошибка при анализе тренда: DeepseekClient.analyze_text() missing 1 required positional argument: 'query'
2025-06-04 10:09:15,709 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:09:15,710 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 10:09:15,710 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:09:15,710 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:09:15,711 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:09:15,711 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:09:16,309 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:09:18,467 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:09:19,967 - test_analysis - INFO - Получаем материалы за 2025-06-02 для категории: Видеоигры
2025-06-04 10:09:19,994 - vector_store - INFO - Найдено 10 материалов для категории Видеоигры за 2025-06-02
2025-06-04 10:09:19,995 - test_analysis - INFO - Найдено 10 материалов за 2025-06-02
2025-06-04 10:09:19,998 - test_analysis - INFO - Общее количество токенов: 3430
2025-06-04 10:09:19,998 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-04 10:09:19,998 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-04 10:09:19,998 - test_analysis - ERROR - Ошибка при анализе тренда: DeepseekClient.analyze_text() missing 1 required positional argument: 'prompt'
2025-06-04 10:11:40,153 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:11:40,154 - test_analysis - INFO - Первые 5 значений: [ 0.0298876   0.01854221  0.02011837 -0.00557605 -0.01341968]
2025-06-04 10:11:40,154 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:11:40,155 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:11:40,155 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:11:40,156 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:11:40,746 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:11:42,840 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:11:44,276 - test_analysis - INFO - Получаем материалы за 2025-06-02 для категории: Видеоигры
2025-06-04 10:11:44,311 - vector_store - INFO - Найдено 10 материалов для категории Видеоигры за 2025-06-02
2025-06-04 10:11:44,311 - test_analysis - INFO - Найдено 10 материалов за 2025-06-02
2025-06-04 10:11:44,313 - test_analysis - INFO - Общее количество токенов: 3430
2025-06-04 10:11:44,313 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-04 10:11:44,314 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-04 10:11:44,314 - test_analysis - ERROR - Ошибка при анализе тренда: DeepseekClient.analyze_text() missing 1 required positional argument: 'query'
2025-06-04 10:53:50,737 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:53:50,737 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 10:53:50,738 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:53:50,738 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:53:50,738 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:53:50,739 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:53:51,331 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:53:53,518 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:53:54,891 - test_analysis - INFO - Получаем материалы за 2025-06-03 для категории: Видеоигры
2025-06-04 10:53:54,920 - vector_store - INFO - Найдено 10 материалов для категории Видеоигры за 2025-06-03
2025-06-04 10:53:54,921 - test_analysis - INFO - Найдено 10 материалов за 2025-06-03
2025-06-04 10:53:54,923 - test_analysis - INFO - Общее количество токенов: 2800
2025-06-04 10:53:54,923 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-04 10:53:54,923 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-04 10:58:14,201 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:58:14,201 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 10:58:14,201 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:58:14,202 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:58:14,202 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:58:14,202 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:58:14,790 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:58:16,772 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:58:18,465 - test_analysis - INFO - Получаем материалы за 2025-06-01 для категории: Видеоигры
2025-06-04 10:58:18,489 - vector_store - INFO - Найдено 10 материалов для категории Видеоигры за 2025-06-01
2025-06-04 10:58:18,489 - test_analysis - INFO - Найдено 10 материалов за 2025-06-01
2025-06-04 10:58:18,491 - test_analysis - INFO - Общее количество токенов: 2444
2025-06-04 10:58:18,491 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-04 10:58:18,491 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-04 10:59:10,860 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 10:59:10,861 - test_analysis - INFO - Первые 5 значений: [ 0.02990836  0.01859048  0.02007772 -0.00552881 -0.01338514]
2025-06-04 10:59:10,861 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 10:59:10,862 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 10:59:10,862 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 10:59:10,862 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:59:11,458 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 10:59:14,673 - vector_store - INFO - Коллекция trends уже существует
2025-06-04 10:59:16,129 - test_analysis - INFO - Получаем материалы за 2025-06-01 для категории: Видеоигры
2025-06-04 10:59:16,150 - vector_store - INFO - Найдено 10 материалов для категории Видеоигры за 2025-06-01
2025-06-04 10:59:16,150 - test_analysis - INFO - Найдено 10 материалов за 2025-06-01
2025-06-04 10:59:16,152 - test_analysis - INFO - Общее количество токенов: 2444
2025-06-04 10:59:16,153 - test_analysis - INFO - Максимальный размер контекста модели: 64000
2025-06-04 10:59:16,153 - test_analysis - INFO - Количество токенов в пределах контекстного окна, анализируем все материалы
2025-06-04 14:27:34,954 - test_analysis - INFO - Тестовая размерность эмбеддинга: 1536
2025-06-04 14:27:34,954 - test_analysis - INFO - Первые 5 значений: [ 0.02993221  0.01857195  0.0201035  -0.00553887 -0.01340481]
2025-06-04 14:27:34,954 - test_analysis - INFO - Размерность эмбеддингов: 1536
2025-06-04 14:27:34,955 - test_analysis - WARNING - Размерность эмбеддингов (1536) отличается от ожидаемой (1024)
2025-06-04 14:27:34,955 - test_analysis - WARNING - Необходимо обновить размерность в VectorStore и пересоздать коллекцию
2025-06-04 14:27:34,955 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 14:27:35,565 - llm_client - INFO - DeepseekClient инициализирован
2025-06-04 14:27:48,918 - vector_store - ERROR - Ошибка при создании коллекции: timed out
2025-06-04 14:27:48,920 - test_analysis - ERROR - Ошибка при анализе тренда: timed out
